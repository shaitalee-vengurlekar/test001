{% load static %}
<html lang="en">
<head>
    <meta charset="utf-8"/>
{#    <link rel="icon" type="image/png" href="{% static 'assets/img/favicon.ico' %}">#}
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>

    <title>Performance Dashboard</title>

    <meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' name='viewport'/>
    <meta name="viewport" content="width=device-width"/>


    <!-- Bootstrap core CSS     -->
    <link href="{% static 'assets/css/bootstrap.min.css' %}" rel="stylesheet"/>
{#    <link href="{% static 'assets/css/material-design-iconic-font.css' %}" rel="stylesheet"/>#}
{#    <link href="{% static 'assets/css/materialdesignicons.min.css' %}" rel="stylesheet"/>#}

    <!-- Animation library for notifications   -->
    <link href="{% static 'assets/css/animate.min.css' %}" rel="stylesheet"/>

    <!--  Light Bootstrap Table core CSS    -->
    <link href="{% static 'assets/css/light-bootstrap-dashboard.css' %}" rel="stylesheet"/>


    <!--  CSS for Demo Purpose, don't include it in your project     -->
{#    <link href="{% static 'assets/css/demo.css' %}" rel="stylesheet"/>#}


    <!--     Fonts and icons     -->
    <link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
{#    <link href="{% static 'assets/css/font-awesome.min.css' %}" rel="stylesheet"/>#}
{#    <link href='http://fonts.googleapis.com/css?family=Roboto:400,700,300' rel='stylesheet' type='text/css'>#}
{#    <link href="{% static 'assets/css/pe-icon-7-stroke.css' %}" rel="stylesheet"/>#}

    <script type="text/javascript">
        function display_c() {
            var refresh = 1000; // Refresh rate in milli seconds
            mytime = setTimeout('display_ct()', refresh)
        }

        function display_ct() {
            var x = new Date().toLocaleString("en-US", {
                timeZone: "America/Los_Angeles",
                timeZoneName: "short",
                dateStyle: "medium",
                timeStyle: "long"
            })
            document.getElementById('ct').innerHTML = x.toString();
            display_c();
        }
    </script>
    <script>
        setTimeout(function () {
            window.location.href = '{% url 'dash' %}';
        }, 130000);
    </script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

    <style>
        @media screen and (width: 1600px) {
            .customcard1 {
                box-shadow: 0 17px 11px 0 rgba(0, 0, 0, 0.2);
                max-width: 452px;
                margin: auto;
                text-align: left;
                font-family: arial;
                display: flex;
                height: 9%;
                margin-top: 20px;
                transform: skew(-20deg);
                background-color: whitesmoke;
                width: 100%;
                padding: 16px;
            }
            .col-xs-4 {
                width: 100%;
                margin-left: 1%;
            }
            .user-banner {
                position: absolute;
                left: -116px;
                bottom: 592px;
                background: #febd49;
                width: 385px;
                color: #fff;
                transform: rotate(-45deg);
                z-index: 10;
            }
            .custumhead {
                padding: 3px 23px 3px;
                text-align: center;
                margin-left: 30px;
            }
        }
        @media only screen and (min-width: 1300px) {
            .content .img2 {
                border-radius: 50%;
                width: 200px;
                margin-left: 21%;
            }

            p {
                padding-top: 18px;
                font-size: large;
            }

            h4 {
                margin: 0px;
                color: #fff;
            }

            #dateee {
                text-align: center;
                padding: 13px;
                font-size: large;
                color: #fff;
            }

            .nam {
                padding-top: 20px;
            }

            .customcard {
                box-shadow: 0 17px 11px 0 rgba(0, 0, 0, 0.2);
                max-width: 452px;
                margin: auto;
                text-align: left;
                font-family: arial;
                display: flex;
                height: 12%;
                margin-bottom: 40px;
                margin-top: 20px;
                transform: skew(-20deg);
                background-image: linear-gradient(45deg, #0D97C6, white);
            }

            .custumhead {
                padding: 3px 0px 3px;
                text-align: right;
            }

            .card .content {
                padding: 13px 43px 39px 43px;
                height: calc(95%);
            }

            .user-banner {
                position: absolute;
                left: -55px;
                bottom: 478px;
                background: #febd49;
                width: 200px;
                color: #fff;
                transform: rotate(-45deg);
                z-index: 10;
            }

            .img1 {
                border-radius: 50%;
                width: 12%;
                margin-left: 10px;
            }

            .card .footer {
                padding: 0px;
            }
        }

        @media only screen and (min-width: 1900px) {
            .content .img2 {
                border-radius: 50%;
                width: 200px;
                margin-left: 32%;
            }

            .nam {
                font-size: x-large;
                padding-top: 17px;
            }

            .customcard {
                box-shadow: 0 17px 11px 0 rgba(0, 0, 0, 0.2);
                max-width: 510px;
                margin: auto;
                text-align: left;
                font-family: arial;
                display: flex;
                height: 7%;
                margin-bottom: 40px;
                margin-top: 20px;
                transform: skew(-20deg);
                background-image: linear-gradient(45deg, lightyellow 67%, white);
            }

            .card .content {
                padding: 59px 43px 32px 43px;
                height: calc(95%);
            }

            marquee {
                width: 30%;
            }

            .custumhead {
                padding: 15px 15px 20px;
                text-align: center;
                margin-left: 20px;
            }

            .user-banner {
                position: absolute;
                left: -116px;
                bottom: 895px;
                background: #febd49;
                width: 385px;
                color: #fff;
                transform: rotate(-45deg);
                z-index: 10;
            }

            .customcard1 {
                box-shadow: 0 6px 6px 0 #fff;
                max-width: 452px;
                margin: auto;
                text-align: left;
                font-family: arial;
                display: flex;
                height: 7%;
                margin-bottom: 40px;
                margin-top: 20px;
                transform: skew(-20deg);
                background-color: whitesmoke;
                width: 100%;
                padding: 16px;
            }

            .ali {
                font-size: xx-large;
                font-weight: bolder;
            }

            .img1 {
                border-radius: 50%;
                width: 12%;
                margin-left: 10px;
            }

            .col-xs-4 {
                width: 100%;
                margin-left: 1%;
            }

            ul {
                text-align: center;
            }

            .headd {
                padding: 30px;
                color: #111;
            }

            p {
                padding-top: 23px;
                font-size: large;
                font-weight: bolder;
            }

            .card .footer {
                padding: 67px;
            }
        }

        @media screen and (width: 1280px) {
            .content .img2 {
                margin-left: 20%;
                border-radius: 50%;
                width: 200px;
            }
            h4 {
                margin: 0px;
				color: white;
            }

            #dateee {
                text-align: center;
                padding: 13px;
                font-size: large;
				color: white;
            }

            .card .content {
                padding: 25px 43px 32px 43px;
                height: calc(95%);
            }


            .custumhead {
                padding: 33px 67px 0;
                text-align: right;
            }

            .user-banner {
                position: absolute;
                left: -55px;
                bottom: 555px;
                background: #febd49;
                width: 200px;
                color: #fff;
                transform: rotate(-45deg);
                z-index: 10;
            }

            .nam {
                font-size: large;
                padding-top: 14px;
                font-weight: bolder;
                padding-right: 0px;
            }

            .customcard {
                box-shadow: 0 17px 11px 0 rgba(0, 0, 0, 0.2);
                max-width: 510px;
                margin: auto;
                text-align: left;
                font-family: arial;
                display: flex;
                height: 10%;
                margin-bottom: 40px;
                margin-top: 20px;
                transform: skew(-20deg);
                background-image: linear-gradient(45deg, #0D97C6, white);
            }

            .img1 {
                border-radius: 50%;
                width: 12%;
                margin-left: 10px;
            }

            .headd {
                padding: 10px;
                color: #111;
            }

            p {
                padding-top: 10px;
                font-size: large;
            }

        }


        .card {
            height: calc(100% - 108px);
            margin-bottom: 30px;
            border-radius: 35px;
            background: #2A2A2A;
        }


        .card .content .ct-chart {
            height: calc(100%);
        }

        #tabular {
            height: 100%;
            width: 100%;
            overflow-y: auto;
            border-radius: 5%;
        }

        table {
            width: 100%;
        }

        td {
            height: 60px;
            padding: 24px;
            background: #eee;
        }

        .table > tbody > tr > td {
            font-size: large;
            color: black;
        }

        .table > tbody > tr > td > label {
            color: darkslategrey;
            font-size: large;
            font-weight: bolder;
        }
        .name {
            color: #111;
        }
    </style>

    <script>
        var currentDiv;
        var nextDiv, count = 0;
        var myInterval = setInterval(function () {
            currentDiv = ""
            if ($('#tabular .row').length == count + 1) {
                $("#tabular .row:gt(0)").hide();
                $('#tabular .row').eq(0).show();
                count = 0;
            } else {
                act = count + 1;
                $("#tabular .row:lt(" + act + ")").hide();
                currentDiv = $('#tabular .row').eq(count + 1);
                currentDiv.show();
                count = count + 1;
            }
        }, 8000);

        $(function () {
            var pie = [];
            var username = [];
            var count = [];
            var title;
            var leg_username = [];
            var avatar = [];
            {% for abc in pie_data %}
                username = [];
                count = [];
                title = [];
                leg_username = [];
                avatar = [];
                {% for lg in legend_data%}
                    {% if lg.team_id == abc.team_id %}
                        leg_username.push(('{{ lg.username }}').toUpperCase());
                    {% endif %}
                {% endfor %}
                pie.push('{{ abc.team_id }}');
                {% for xyz in pie_data1 %}
                    {% if xyz.team_id == abc.team_id %}
                        username.push(('{{ xyz.username }}').toUpperCase());
                        avatar.push('{{ xyz.avatar }}');
                        count.push('{{ xyz.team_count }}');
                        title = '{{ xyz.title }}'
                    {% endif %}
                {% endfor %}
                firstname = title.split(" ");
                $("#tabular").append("<div class='row'><div class='headd' style='border-radius: 35px; text-align: center; font-weight: bolder; font-size: xx-large;  height: 10%; background-image: linear-gradient(45deg, lightyellow 67%, white);'><i class='fa fa-users' style='color: #111;'></i>&nbsp;&nbsp;&nbsp;" + title + "'s Team</div><div class='col-md-6' id='" + firstname[0] + "odd'></div><div class='col-md-6' id='" + firstname[0] + "even'></div></div>");
                for (i = 0; i < username.length; i++) {
                   if (i % 2 == 0) {
                        if(avatar[i]=='None')
                        {
                        $("#" + firstname[0] + "odd").append("<div class='customcard'><img class='img1'   src='{% static 'images.png' %}' ><p class='col-md-10 name'>" + username[i] + "</p> <button class='button button5 col-md-2'>" + count[i] + "</button> </div>");
                        }
                        else
                        {
                        $("#" + firstname[0] + "odd").append("<div class='customcard'><img class='img1'  src='https://ats.vertisystem.com/uploads/avatar/80x80/"+avatar[i]+"'  ><p class='col-md-10 name'>" + username[i] + "</p> <button class='button button5 col-md-2'>" + count[i] + "</button> </div>");
                        }

                    } else {
                         if(avatar[i]=='None')
                        {
                        $("#" + firstname[0] + "even").append("<div class='customcard'><img class='img1'   src='{% static 'images.png' %}' ><p class='col-md-10 name'>" + username[i] + "</p> <button class='button button5 col-md-2'>" + count[i] + "</button> </div>");
                        }
                        else
                        {
                        $("#" + firstname[0] + "even").append("<div class='customcard'><img class='img1'  src='https://ats.vertisystem.com/uploads/avatar/80x80/"+avatar[i]+"'  ><p class='col-md-10 name'>" + username[i] + "</p> <button class='button button5 col-md-2'>" + count[i] + "</button> </div>");
                        }
                    }

                }
            {% endfor %}
            if ($('#tabular .row').length > 1) {
                $("#tabular .row:gt(0)").hide();
            }


        });
    </script>

</head>
<body onload="display_ct()">

<div class="wrapper" style="background: #111214;">
    <div class="main-panel" style="width: calc(100%); height: 98%;">
        <nav class="navbar navbar-default navbar-fixed"
             style="background-image: linear-gradient(45deg, lightyellow 67%, white);">
            <div class="container-fluid">
                <div class="navbar-header" style="height: 73px;">
                    <a class="navbar-brand" href="#" style="">
                        <img src="{% static 'Logo1.png' %}" class="logo" alt="logo"
                             style="height: 75px; margin-top: -18px;">
                    </a>
                </div>
                <div class="nav navbar-nav navbar-right" style="margin-top: 25px; margin-right: 4px;">
                    <span class="tme" id='ct' style="color: currentColor; font-weight: 900; font-size: x-large"></span>
                </div>
            </div>
        </nav>

        <script>
            $(document).ready(function() {
                var options = { weekday: 'short', year: 'numeric', month: 'short', day: 'numeric' };var prevFriday =new Date();
                var prevMonday = new Date();
                prevMonday.setDate(prevMonday.getDate() - (prevMonday.getDay() + 6) % 7 -7 );
                prevFriday.setDate(prevFriday.getDate() - (prevMonday.getDay() + 5) % 7);
                console.log(prevMonday.toLocaleDateString("en-US", options));
                console.log(prevFriday.toLocaleDateString("en-US", options));
                $("#date1").append(prevMonday.toLocaleDateString("en-US", options));
                $("#date2").append(prevFriday.toLocaleDateString("en-US", options));
            });
        </script>
        <div class="content" style="padding: 8px 3px; min-height: calc(100% - 74px);">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-md-4" style="overflow: hidden; padding-left: 0px;">
                        <div class="card">
                            <div class="custumhead">
                                <span class="user-banner"><marquee behaviour="slide" direction="left" scrollamount="7"
                                                                   style=""><i class="fa fa-trophy fa-3x"
                                                                               style="width: 100%;"></i></marquee></span>
                                <span style="color: #fff; text-align: right; font-size: x-large; font-weight: bolder;"> Performer of the Week</span>
                            </div>
                            {% for performer in weak_topper %}
                                <div class="content center-block">
                                     {% if performer.avatar %}
                                        <img class="img2" src="https://ats.vertisystem.com/uploads/avatar/80x80/{{performer.avatar}}" alt="Avatar"
                                         style="">
                                     {% else %}
                                         <img class="img2" src="{% static 'images.png' %}" alt="Avatar"
                                         style="">
                                     {% endif %}
                                    <h4 style="line-height: 85px; text-align: center; font-weight: 600; font-size: xx-large;">{{ performer.username }}</h4>
                                    <div id="dateee"><span id="date1"></span>
                                    <span >-</span>
                                    <span id="date2"></span></div>

                                    <div class="footer">
                                        <div class="row minus-margin">
                                            <div class="col-xs-4 b-r">
                                                <div class="customcard1">
                                                    <span class="col-md-10 ali" style="color:#41b3f9">Submissions</span>
                                                    <span class="col-md-2 ali"
                                                          style="color:#41b3f9">{{ performer.submission }}</span>
                                                </div>
                                            </div>
                                            <div class=" col-xs-4 b-r ">
                                                <div class="customcard1 text-warning">
                                                    <span class="col-md-10 ali">Interviewed</span>
                                                    <span class="col-md-2 ali"> {{ performer.interview }}</span>
                                                </div>
                                            </div>
                                            <div class="col-xs-4 b-r">
                                                <div class="customcard1 text-success">
                                                    <span class="col-md-10 ali">Offers</span>
                                                    <span class="col-md-2 ali">{{ performer.offers }}</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            {% endfor %}
                        </div>
                    </div>
                    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
                    <style>


                        .button {
                            background-color: #4CAF50; /* Green */
                            border: none;
                            color: white;
                            text-align: center;
                            text-decoration: none;
                            display: inline-block;
                            font-size: 16px;
                            margin: 8px;
                            cursor: pointer;
                        }

                        .button5 {
                            border-radius: 12px;
                            font-size: xx-large;
                        }
                    </style>
                    <div class="col-md-8">
                        <div class="card">
                            <div class="album py-5 bg-light">
                                <div class="container-fluid" id="tabular">

                                </div>
                            </div>
                        </div>
                    </div>
                    <script>

                        var $el = $("#tabular");

                        function anim() {
                            var st = $el.scrollTop();
                            var sb = $el.prop("scrollHeight") - $el.innerHeight();
                            $el.animate({scrollTop: st < sb / 2 ? sb : 0}, 4000, anim);
                        }

                        function stop() {
                            $el.stop();
                        }

                        $el.hover(stop, anim);
                    </script>
                </div>
            </div>
        </div>
    </div>
</div>


</body>

<!--   Core JS Files   -->
<script src="{% static 'assets/js/jquery.3.2.1.min.js' %}" type="text/javascript"></script>
{#<script src="{% static 'assets/js/bootstrap.min.js' %}" type="text/javascript"></script>#}


<!--  Charts Plugin -->
<script src="{% static 'assets/js/chartist.min.js' %}"></script>

<!--  Notifications Plugin    -->
{#<script src="{% static 'assets/js/bootstrap-notify.js' %}"></script>#}

<!-- Light Bootstrap Table Core javascript and methods for Demo purpose -->
{#<script src="{% static 'assets/js/light-bootstrap-dashboard.js' %}"></script>#}

<!-- Light Bootstrap Table DEMO methods, don't include it in your project! -->
{#<script src="{% static 'assets/js/demo.js' %}"></script>#}


</html>
